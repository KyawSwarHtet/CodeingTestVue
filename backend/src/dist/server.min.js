"use strict";exports.__esModule=!0;var express_1=require("express"),body_parser_1=require("body-parser"),compression_1=require("compression"),cors_1=require("cors"),mongoose_1=require("mongoose"),path_1=require("path"),dotenv_1=require("dotenv"),image_route_1=require("./router/image-route"),app=express_1.default();dotenv_1.config(),app.use(cors_1.default({credentials:!0})),app.use(compression_1.default()),app.use(body_parser_1.default.json()),app.use(express_1.default.json()),app.use(express_1.default.urlencoded({extended:!0})),app.use("/codetest",express_1.default.static(path_1.default.join(__dirname,"codetest"))),mongoose_1.default.connect(process.env.MONGO_URL).then(function(){return console.log("connected with MONGODB",process.env.MONGO_URL)}).catch(function(e){console.log(e)}),app.use("/api",image_route_1.default),app.use(function(e,s,o,r){"LIMIT_FILE_TYPES"===e.name&&(o.status(422).json({message:"Only images are allowed"}),r()),"LIMIT_FILE_SIZE"===e.name&&(o.status(422).json({message:"Too large. Max size is allowed only 5MB"}),r()),r()});var PORT=process.env.PORT||5e3;console.log("server is running on ",PORT),app.listen(PORT);
//# sourceMappingURL=server.min.js.map
